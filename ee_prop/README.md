## EE_PROP

EE_Prop is a class to manage the wifi, mqtt and ota functions of a prop in an escape room environment.
The code is designed to be used with the esp8266 and esp32. When running on an ESP32 the code will use both cores of the ESP32. The code can be compiled on both the Arduino IDE and VS Code using the Arduino extension

### Features

Connects to wifi with low power transmission. 
prop automatically connects to the mqtt server and subscribes to the following topics:

```
"eeprop"
ROOM
/cmnd/NAME
/cmnd/NAME/prop_id

the prop will publish the following topics:
/lwt/NAME or /lwt/NAME/prop_id ( if USE_ID is true )
/tel/NAME or /tel/NAME/prop_id ( if USE_ID is true )
/stat/NAME or /stat/NAME/prop_id ( if USE_ID is true )
```

the prop will listen for the following commands by default:

```
reboot

```

### Installation

Download the library and install it in your Arduino IDE.

### Usage

The library is used to manage the wifi, mqtt and ota functions in and escape room environment.
The prop uses Json over mqtt to communicate. 
All props connected to the same mqtt server can be addressed by the "eeprop" topic. This allows you to send a command to all props ( global reboot or enable/disable for example ).

All props within the same room can be addressed by the room name topic. This allows you to send a command to all props in a room ( reboot or enable/disable for example ).

All props within the same NAME can be addressed by the /cmnd/NAME topic. This allows you to send a command to all props with the same NAME ( reboot or enable/disable for example ).

Only the prop with the same prop_id can be addressed by the /cmnd/NAME/prop_id topic. As this is generated by the chip Id then this can be considered to be unique. This allows you to send a command to a specific prop ( reboot or enable/disable for example ).


#### create an instance of the class

##### ee_prop myProp(ROOM_NAME, CLASS, USE_ID, VERSION);

ROOM_NAME: the name of the room

CLASS: the class or name of the prop ( eg. RELAY, KEYPAD , UNIQUE_NAME )

USE_ID: boolean to use the id or not - this will attach the id to the mqtt topics.

VERSION: the version of the prop code

##### myProp.begin(SSID, PASSWORD, MQTT_SERVER);

SSID: the wifi ssid

PASSWORD: the wifi password

MQTT_SERVER: the mqtt server

##### myProp.loop();

This function must be called in the loop function of the arduino sketch if you are using the esp8266. If you are using the esp32 the loop function is called automatically and handled by the library. 


